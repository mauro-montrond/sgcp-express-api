-- MySQL Script generated by MySQL Workbench
-- Sun Apr 25 15:48:49 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema sgcp_01
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `sgcp_01` ;

-- -----------------------------------------------------
-- Schema sgcp_01
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `sgcp_01` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `sgcp_01` ;

-- -----------------------------------------------------
-- Table `sgcp_01`.`geografia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`geografia` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`geografia` (
  `ID` VARCHAR(50) NOT NULL,
  `NOME` VARCHAR(300) NOT NULL,
  `PAIS` VARCHAR(50) NULL DEFAULT NULL,
  `ILHA` VARCHAR(50) NULL DEFAULT NULL,
  `CONCELHO` VARCHAR(50) NULL DEFAULT NULL,
  `FREGUESIA` VARCHAR(50) NULL DEFAULT NULL,
  `ZONA` VARCHAR(50) NULL DEFAULT NULL,
  `NOME_NORM` VARCHAR(300) NOT NULL,
  `NIVEL_DETALHE` VARCHAR(2) NOT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`perfil`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`perfil` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`perfil` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `CODIGO` VARCHAR(20) NOT NULL,
  `DESCRICAO` VARCHAR(200) NOT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  `ESTADO` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `CODIGO_UNIQUE` (`CODIGO` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 10
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`utilizador`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`utilizador` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`utilizador` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_PERFIL` INT NOT NULL,
  `UTILIZADOR` VARCHAR(16) NOT NULL,
  `NOME` VARCHAR(100) NOT NULL,
  `EMAIL` VARCHAR(100) NOT NULL,
  `SENHA` VARCHAR(100) NOT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  `ESTADO` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `UTILIZADOR_UNIQUE` (`UTILIZADOR` ASC) VISIBLE,
  INDEX `ID_PERFIL_UTILIZADOR_idx` (`ID_PERFIL` ASC) VISIBLE,
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC) VISIBLE,
  CONSTRAINT `ID_PERFIL_UTILIZADOR`
    FOREIGN KEY (`ID_PERFIL`)
    REFERENCES `sgcp_01`.`perfil` (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`individuo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`individuo` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`individuo` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_UTILIZADOR` INT NOT NULL,
  `NOME` VARCHAR(45) NULL DEFAULT NULL,
  `ALCUNHA` VARCHAR(45) NULL DEFAULT NULL,
  `PAI` VARCHAR(45) NULL DEFAULT NULL,
  `MAE` VARCHAR(45) NULL DEFAULT NULL,
  `NACIONALIDADE` VARCHAR(300) NULL DEFAULT NULL,
  `LOCAL_NASCIMENTO` VARCHAR(300) NULL DEFAULT NULL,
  `DATA_NASCIMENTO` DATE NULL DEFAULT NULL,
  `IDADE_APARENTE` INT NULL DEFAULT NULL,
  `ESTADO_CIVIL` VARCHAR(50) NULL DEFAULT NULL,
  `PROFISSAO` VARCHAR(50) NULL DEFAULT NULL,
  `ID_RESIDENCIA` VARCHAR(50) NULL DEFAULT NULL,
  `LOCAL_TRABALHO` VARCHAR(50) NULL DEFAULT NULL,
  `NUM_DOC` VARCHAR(50) NULL DEFAULT NULL,
  `DATA_EMISSAO_DOC` DATE NULL DEFAULT NULL,
  `LOCAL_EMISSAO_DOC` VARCHAR(300) NULL DEFAULT NULL,
  `ALTURA` INT NULL DEFAULT NULL,
  `CABELO` VARCHAR(300) NULL DEFAULT NULL,
  `BARBA` VARCHAR(300) NULL DEFAULT NULL,
  `NARIZ` VARCHAR(300) NULL DEFAULT NULL,
  `BOCA` VARCHAR(300) NULL DEFAULT NULL,
  `ROSTO` VARCHAR(300) NULL DEFAULT NULL,
  `COR` VARCHAR(100) NULL DEFAULT NULL,
  `TATUAGENS` VARCHAR(300) NULL DEFAULT NULL,
  `CLASSIFICACAO_POLICIAL` VARCHAR(100) NULL DEFAULT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  `ESTADO` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `ID_UTILIZADOR_idx` (`ID_UTILIZADOR` ASC) INVISIBLE,
  INDEX `RESIDENCIA_idx` (`ID_RESIDENCIA` ASC) VISIBLE,
  UNIQUE INDEX `NUM_DOC_UNIQUE` (`NUM_DOC` ASC) VISIBLE,
  CONSTRAINT `ID_RESIDENCIA_INDIVIDUO`
    FOREIGN KEY (`ID_RESIDENCIA`)
    REFERENCES `sgcp_01`.`geografia` (`ID`),
  CONSTRAINT `ID_UTILIZADOR_INDIVIDUO`
    FOREIGN KEY (`ID_UTILIZADOR`)
    REFERENCES `sgcp_01`.`utilizador` (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`antecedente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`antecedente` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`antecedente` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_UTILIZADOR` INT NOT NULL,
  `ID_INDIVIDUO` INT NOT NULL,
  `NO_REFERENCIA` VARCHAR(45) NOT NULL,
  `MOTIVO_DETENCAO` VARCHAR(100) NOT NULL,
  `DESTINO` VARCHAR(45) NOT NULL,
  `DATA` DATETIME NOT NULL DEFAULT NOW(),
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  `ESTADO` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `ID_UTILIZADOR_idx` (`ID_UTILIZADOR` ASC) VISIBLE,
  INDEX `ID_INDIVIDUO_idx` (`ID_INDIVIDUO` ASC) VISIBLE,
  CONSTRAINT `ID_INDIVIDUO_ANTECEDENTE`
    FOREIGN KEY (`ID_INDIVIDUO`)
    REFERENCES `sgcp_01`.`individuo` (`ID`),
  CONSTRAINT `ID_UTILIZADOR_ANTECEDENTE`
    FOREIGN KEY (`ID_UTILIZADOR`)
    REFERENCES `sgcp_01`.`utilizador` (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`digitais`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`digitais` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`digitais` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_INDIVIDUO` INT NOT NULL,
  `POLEGAR_DIREITO` VARCHAR(45) NULL DEFAULT NULL,
  `INDICADOR_DIREITO` VARCHAR(45) NULL DEFAULT NULL,
  `MEDIO_DIREITO` VARCHAR(45) NULL DEFAULT NULL,
  `ANELAR_DIREITO` VARCHAR(45) NULL DEFAULT NULL,
  `MINDINHO_DIREITO` VARCHAR(45) NULL DEFAULT NULL,
  `POLEGAR_ESQUERDO` VARCHAR(45) NULL DEFAULT NULL,
  `INDICADOR_ESQUERDO` VARCHAR(45) NULL DEFAULT NULL,
  `MEDIO_ESQUERDO` VARCHAR(45) NULL DEFAULT NULL,
  `ANELAR_ESQUERDO` VARCHAR(45) NULL DEFAULT NULL,
  `MINDINHO_ESQUERDO` VARCHAR(45) NULL DEFAULT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  PRIMARY KEY (`ID`),
  INDEX `ID_INDIVIDUO_idx` (`ID_INDIVIDUO` ASC) VISIBLE,
  UNIQUE INDEX `ID_INDIVIDUO_UNIQUE` (`ID_INDIVIDUO` ASC) VISIBLE,
  UNIQUE INDEX `POLEGAR_DIREITO_UNIQUE` (`POLEGAR_DIREITO` ASC) VISIBLE,
  UNIQUE INDEX `INDICADOR_DIREITO_UNIQUE` (`INDICADOR_DIREITO` ASC) VISIBLE,
  UNIQUE INDEX `MEDIO_DIREITO_UNIQUE` (`MEDIO_DIREITO` ASC) VISIBLE,
  UNIQUE INDEX `ANELAR_DIREITO_UNIQUE` (`ANELAR_DIREITO` ASC) VISIBLE,
  UNIQUE INDEX `MINDINHO_DIREITO_UNIQUE` (`MINDINHO_DIREITO` ASC) VISIBLE,
  UNIQUE INDEX `POLEGAR_ESQUERDO_UNIQUE` (`POLEGAR_ESQUERDO` ASC) VISIBLE,
  UNIQUE INDEX `INDICADOR_ESQUERDO_UNIQUE` (`INDICADOR_ESQUERDO` ASC) VISIBLE,
  UNIQUE INDEX `MEDIO_ESQUERDO_UNIQUE` (`MEDIO_ESQUERDO` ASC) VISIBLE,
  UNIQUE INDEX `ANELAR_ESQUERDO_UNIQUE` (`ANELAR_ESQUERDO` ASC) VISIBLE,
  UNIQUE INDEX `MINDINHO_ESQUERDO_UNIQUE` (`MINDINHO_ESQUERDO` ASC) VISIBLE,
  CONSTRAINT `ID_INDIVIDUO_DIGITAIS`
    FOREIGN KEY (`ID_INDIVIDUO`)
    REFERENCES `sgcp_01`.`individuo` (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`fotos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`fotos` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`fotos` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_INDIVIDUO` INT NOT NULL,
  `FOTO_ESQUERDA` VARCHAR(45) NULL DEFAULT NULL,
  `FOTO_FRONTAL` VARCHAR(45) NULL DEFAULT NULL,
  `FOTO_DIREITA` VARCHAR(45) NULL DEFAULT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  `ESTADO` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `ID_INDIVIDUO_idx` (`ID_INDIVIDUO` ASC) VISIBLE,
  UNIQUE INDEX `FOTO_ESQUERDA_UNIQUE` (`FOTO_ESQUERDA` ASC) VISIBLE,
  UNIQUE INDEX `FOTO_FRONTAL_UNIQUE` (`FOTO_FRONTAL` ASC) VISIBLE,
  UNIQUE INDEX `FOTO_DIREITA_UNIQUE` (`FOTO_DIREITA` ASC) VISIBLE,
  CONSTRAINT `ID_INDIVIDUO_FOTOS`
    FOREIGN KEY (`ID_INDIVIDUO`)
    REFERENCES `sgcp_01`.`individuo` (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`logs`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`logs` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`logs` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_UTILIZADOR` INT NOT NULL,
  `TABELA` VARCHAR(100) NOT NULL,
  `ID_OBJECTO` VARCHAR(30) NOT NULL,
  `VALOR_ANTIGO` TEXT NOT NULL,
  `VALOR_NOVO` TEXT NOT NULL,
  `ACAO` VARCHAR(50) NOT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  PRIMARY KEY (`ID`),
  INDEX `ID_UTILIZADOR_idx` (`ID_UTILIZADOR` ASC) VISIBLE,
  CONSTRAINT `ID_UTILIZADOR_LOGS`
    FOREIGN KEY (`ID_UTILIZADOR`)
    REFERENCES `sgcp_01`.`utilizador` (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`menu`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`menu` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`menu` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `CODIGO` VARCHAR(20) NOT NULL,
  `DESCRICAO` VARCHAR(200) NOT NULL,
  `ID_MENU_PAI` INT NULL DEFAULT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  `ESTADO` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `CODIGO_UNIQUE` (`CODIGO` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `sgcp_01`.`menu_perfil`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sgcp_01`.`menu_perfil` ;

CREATE TABLE IF NOT EXISTS `sgcp_01`.`menu_perfil` (
  `ID_PERFIL` INT NOT NULL,
  `ID_MENU` INT NOT NULL,
  `ESTADO` VARCHAR(1) NOT NULL,
  `DATA_REGISTO` DATETIME NOT NULL DEFAULT NOW(),
  INDEX `ID_MENU_MENU_PERFIL_idx` (`ID_MENU` ASC) VISIBLE,
  INDEX `ID_PERFIL_MENU_PERFIL_idx` (`ID_PERFIL` ASC) VISIBLE,
  PRIMARY KEY (`ID_PERFIL`, `ID_MENU`),
  CONSTRAINT `ID_MENU_MENU_PERFIL`
    FOREIGN KEY (`ID_MENU`)
    REFERENCES `sgcp_01`.`menu` (`ID`),
  CONSTRAINT `ID_PERFIL_MENU_PERFIL`
    FOREIGN KEY (`ID_PERFIL`)
    REFERENCES `sgcp_01`.`perfil` (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
